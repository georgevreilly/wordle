#!/bin/bash

if [ "$(uname)" == "Linux" ]; then
    cbcopy="wl-copy"
elif [ "$(uname)" == "Darwin" ]; then
    cbcopy="pbcopy"
fi

if [ -n "$1" ]; then
    line="$(grep "$1" games.md)"
else
    line="$(tail -1 games.md)"
fi

# shellcheck disable=SC2016
result="$(echo "$line" | sed -E 's/^.+`([^`]+)`.+`([^`]+)`$/\1 => \2/')"
echo "$result"

echo "$result" | "$cbcopy"
